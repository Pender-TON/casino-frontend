{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useMemo, useState } from \"react\";\nimport WebApp from \"@twa-dev/sdk\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction resolveThemeByPlatform(platform) {\n  if (platform) {\n    return platform === \"macos\" || platform === \"ios\" ? \"apple\" : \"material\";\n  } else if (navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad|Mac OS/i)) {\n    return \"apple\";\n  } else {\n    return \"material\";\n  }\n}\nexport var AppearanceContext = /*#__PURE__*/createContext({\n  colorScheme: WebApp.colorScheme,\n  theme: resolveThemeByPlatform(WebApp.platform),\n  platform: WebApp.platform\n});\nexport var AppearanceProvider = function AppearanceProvider(_ref) {\n  var children = _ref.children,\n    themeProp = _ref.theme,\n    platformProp = _ref.platform,\n    colorSchemeProp = _ref.colorScheme;\n  var _useState = useState(colorSchemeProp || WebApp.colorScheme),\n    _useState2 = _slicedToArray(_useState, 2),\n    colorScheme = _useState2[0],\n    setColorScheme = _useState2[1];\n  var platform = platformProp || WebApp.platform;\n  var theme = useMemo(function () {\n    return themeProp || resolveThemeByPlatform(platform);\n  }, [themeProp, platform]);\n  useEffect(function () {\n    document.body.setAttribute(\"data-theme\", theme);\n  }, [theme]);\n  useEffect(function () {\n    if (!colorSchemeProp) {\n      var onChange = function onChange() {\n        setColorScheme(WebApp.colorScheme);\n      };\n      WebApp.onEvent(\"themeChanged\", onChange);\n      return function () {\n        WebApp.offEvent(\"themeChanged\", onChange);\n      };\n    } else {\n      setColorScheme(colorSchemeProp);\n    }\n  }, [colorSchemeProp]);\n  useEffect(function () {\n    document.body.setAttribute(\"data-color-scheme\", colorScheme);\n  }, [colorScheme]);\n  var value = useMemo(function () {\n    return {\n      platform: platform,\n      theme: theme,\n      colorScheme: colorScheme\n    };\n  }, [colorScheme, theme, platform]);\n  return /*#__PURE__*/_jsx(AppearanceContext.Provider, {\n    value: value,\n    children: children\n  });\n};","map":{"version":3,"names":["_slicedToArray","createContext","useEffect","useMemo","useState","WebApp","jsx","_jsx","resolveThemeByPlatform","platform","navigator","userAgent","match","AppearanceContext","colorScheme","theme","AppearanceProvider","_ref","children","themeProp","platformProp","colorSchemeProp","_useState","_useState2","setColorScheme","document","body","setAttribute","onChange","onEvent","offEvent","value","Provider"],"sources":["/Users/danirvaleev/node_modules/@twa-dev/mark42/dist/Components/AppearanceProvider/AppearanceProvider.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useMemo, useState } from \"react\";\nimport WebApp from \"@twa-dev/sdk\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction resolveThemeByPlatform(platform) {\n  if (platform) {\n    return platform === \"macos\" || platform === \"ios\" ? \"apple\" : \"material\";\n  } else if (navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad|Mac OS/i)) {\n    return \"apple\";\n  } else {\n    return \"material\";\n  }\n}\n\nexport var AppearanceContext = /*#__PURE__*/createContext({\n  colorScheme: WebApp.colorScheme,\n  theme: resolveThemeByPlatform(WebApp.platform),\n  platform: WebApp.platform\n});\nexport var AppearanceProvider = function AppearanceProvider(_ref) {\n  var children = _ref.children,\n      themeProp = _ref.theme,\n      platformProp = _ref.platform,\n      colorSchemeProp = _ref.colorScheme;\n\n  var _useState = useState(colorSchemeProp || WebApp.colorScheme),\n      _useState2 = _slicedToArray(_useState, 2),\n      colorScheme = _useState2[0],\n      setColorScheme = _useState2[1];\n\n  var platform = platformProp || WebApp.platform;\n  var theme = useMemo(function () {\n    return themeProp || resolveThemeByPlatform(platform);\n  }, [themeProp, platform]);\n  useEffect(function () {\n    document.body.setAttribute(\"data-theme\", theme);\n  }, [theme]);\n  useEffect(function () {\n    if (!colorSchemeProp) {\n      var onChange = function onChange() {\n        setColorScheme(WebApp.colorScheme);\n      };\n\n      WebApp.onEvent(\"themeChanged\", onChange);\n      return function () {\n        WebApp.offEvent(\"themeChanged\", onChange);\n      };\n    } else {\n      setColorScheme(colorSchemeProp);\n    }\n  }, [colorSchemeProp]);\n  useEffect(function () {\n    document.body.setAttribute(\"data-color-scheme\", colorScheme);\n  }, [colorScheme]);\n  var value = useMemo(function () {\n    return {\n      platform: platform,\n      theme: theme,\n      colorScheme: colorScheme\n    };\n  }, [colorScheme, theme, platform]);\n  return /*#__PURE__*/_jsx(AppearanceContext.Provider, {\n    value: value,\n    children: children\n  });\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}